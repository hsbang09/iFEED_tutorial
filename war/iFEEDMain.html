<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>iFEED Web Application</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="js/lib/jquery.js" type="text/javascript"></script>
        <script src="js/lib/d3.js"></script>
	   <script src="js/lib/tabcontent.js" type="text/javascript"></script>
	   <link href="js/lib/tabcontent.css" rel="stylesheet" type="text/css"/>
	   
       <script src="https://apis.google.com/js/platform.js" async defer></script>
       <meta name="google-signin-client_id" content="564804694787-lnsp9md3u0q8086nftbamu43drid6d4t.apps.googleusercontent.com">

	<style>
	


            #scatterPlotFigure {
			    border-style: solid;
			    border-width: 3.3px;
                width: 960px;
                height: 540px;
                float: left;
                margin-right: 10px;
                margin-left:0px;
                margin-top:0px;
            }
			.select_within_range_text_box{
                margin-top: 3px;
                margin-bottom: 3px;
                width: 65px;
			}


            #dropdown_presetDesignFeatures{
                margin-top: 7px;
            }

            .main_options button{
            	margin-top: 3px;
            	margin-bottom: 3px;
                width: 170px;
            }
          
			                

            
			.node circle {
			  cursor: pointer;
			  fill: #fff;
			  stroke: steelblue;
			  stroke-width: 0px;
			}
			
			.node text {
			  font-size: 11px;
			}
			
			path.treeLink {
			  fill: none;
			  stroke: #ccc;
			  stroke-width: 1.5px;
			}

            .axis path,
            .axis line {
                fill: none;
                stroke: #000;
                shape-rendering: crispEdges;
            }

            .dot {
                stroke: #000;
                stroke-width: 0;
            }

            .grid .tick {
                stroke: lightgrey;
                opacity: 0.7;
            }
            .grid path {
                stroke-width: 0;
            }


            #arch_cell{ 
                border: 1px solid black;
                padding: 10px;
                vertical-align: central;
            }
            #inst_cell{
                border: 1px solid black;
                padding: 3px;
                vertical-align: central;

                text-align: center;
                font-family: 'Helvetica Neue', Helvetica; font-weight: 300; padding: 5px;
                font-size: 15px;
            }


            #filter_inputs{
                width:95%;
                float:left;
                margin-left: 2px;
                margin-top: 8px;
            }
            
            #filter_input1_textBox{
                width:180px;
                margin-left:5px;
                margin-right:2px;
                margin-top: 10px;
                margin-bottom:10px;
            }
            #filter_input2_textBox{
                width:180px;
                margin-left:5px;
                margin-right:2px;
                margin-top: 10px;
            }
            #filter_input3_textBox{
                width:180px;
                margin-left:5px;
                margin-right:2px;
                margin-top: 10px;
            }
            
            #filter_expression{
                color: black;
                border: 1px black solid;
                height: 60px;
                width: 80%;
                float: left;
                margin-left: 5px;
                overflow:scroll;
            }
            
			#clockdiv{
			    font-family: sans-serif;
			    color: #fff;
			    display: inline-block;
			    font-weight: 100;
			    text-align: left;
			    font-size: 30px;
			    margin-top: 5px;
			    float:right;
			}
			
			#clockdiv > div{
			    padding: 10px;
			    border-radius: 3px;
			    background: #E2E2E2;
			    display: inline-block;
			}
			
			#clockdiv div > span{
			    padding: 15px;
			    border-radius: 3px;
			    background: #787878;
			    display: inline-block;
			}
			
			.smalltext{
				color: #787878;
			    padding-top: 5px;
			    font-size: 16px;
			}
            
            .toggle-selection-option-div div{
            	width:100%;
            	height:25px;
            	float:left;
            }
            
			            
			/* Tooltip container */
 			.tooltip { 
 			    position: relative;
 			} 
			
			/* Tooltip text */
			.tooltip .tooltiptext {
			    visibility: hidden;
			    width: 150px;
			    background-color: #DCC5C1;
			    color: black;
			    text-align: center;
			    padding: 10px;
			    border-radius: 6px;
			 
			    /* Position the tooltip text - see examples below! */
			    position: absolute;
			    z-index: 1;
			    
			    opacity: 0;
			    transition: opacity 0.3s;
			}
	
			/* Show the tooltip text when you mouse over the tooltip container */
			.tooltip:hover .tooltiptext {
				opacity: 1;
			    visibility: visible;
			}


			.img-hor-vert {
			    -moz-transform: scale(-1, -1);
			    -o-transform: scale(-1, -1);
			    -webkit-transform: scale(-1, -1);
			    transform: scale(-1, -1);
			}
	
	</style>


    </head>
    <body>
        <div id="title" style="float:left; margin-top: 15px; margin-bottom: 20px; text-align: center; width: 100%;">
				<h1>iFEED Tutorial</h1>
        </div>

		
		<div style="float:left;width:100%; margin-top: 20px">
			<div style="width:1300px; margin:auto">
			
			
			    <div id="main_div" style="margin:auto;width:80%;background-color:#F9E39D;padding:20px">
			    	<h3 id="main_header"></h3>
			    	<p id="main_text" style="font-size:18px"></p>
			    	<img id="main_img" style="margin:auto;">
			    	<img id="main_img2" style="margin:auto;">
			    	<p id="main_text3" style="font-size:18px"></p>
			    	
			    	<p id="main_img_credit" style="margin-top:5px; font-size:10px"></p>
			    	
			    	
			    	<div id="arrow_div" style="margin-top:30px">
			    		<img src="images/rightarrow.png" class="img-hor-vert" id="leftarrow" width="48" height="31">
			    		<img src="images/rightarrow.png" id="rightarrow" width="48" height="31">
    					<div id="tutorial_page_number" style="font-size:12px; margin:0 48%"></div>
			    	</div>
			    </div>
						
			
			
			
	
		        <div id="StatusBar" style="width: 100%; float:left; margin-top:10px; margin-bottom:5px;
		                height: 30px;">
		<!--             <div id="satisfactionScoreSummaryButton_div"> -->
		                <!--<button type="button" id="satisfactionScoreSummaryButton">Satisfaction Score Decomposition</button>-->
		<!--             </div> -->
		
		           <div id="numOfArchs" style="float:left;width:210px;height:25px;">
		               <div style="font-size:18px; line-height:25px;height: 25px; float:left;margin-left: 1px;">Number of designs:</div>
		               <div id="numOfArchs_inputBox" style="width:50px;text-align: center;line-height:25px;margin-left:3px;font-size:18px; height: 25px; float:left;background-color: #D5D5D5;"></div>
		           </div>
		           <div id="numOfSelectedArchs" style="float:left;width:270px;height:25px;font-size:18px; margin-left:20px">
		               <div style="font-size:18px; line-height:25px;height: 25px; float:left;margin-left: 1px;">Number of selected designs:</div>
		               <div id="numOfSelectedArchs_inputBox" style="width:50px;line-height:25px;margin-left:3px;text-align: center;font-size:18px; height: 25px;float:left;background-color: #D5D5D5;"></div> 
		           </div>
		           
		        </div>
		
		
		        <div id="firstLineOfFigs" style="margin-bottom: 10px;width: 100%%;height: 540px;float: left;">
		            
		            <figure id="scatterPlotFigure"></figure>
		            
		            <div id="OptionsPane" class="main_options" style="float:left; width: 250px; height: 540px;border: 1px black double;">
		            	<div style="width:225px;height:535px;margin:auto;">
		            		
		            		<div style="float:left;width:190px;padding:15px;height:115px;background-color:#D9D9D9;margin-top:15px">
			            		<div class="toggle-selection-option-div" style="height: 110px;float:left;">
									<div style="font-size:18px;font-weight: bold;">
										Mouse Selection
									</div>
									<div class="tooltip">
										<span class="tooltiptext" style="right:230px;padding:11px;width:230px">Zoom/Pan: This option allows zooming/panning on the scatter plot</span>
										<div style="margin-top:3px" onclick="set_selection_option(1);">
									    	Zoom/Pan:
									    	<input id="zoom" type="radio" checked="True"/>
								    	</div>
									</div>
								    
									<div class="tooltip">
										<span class="tooltiptext" style="right:230px;padding:11px;width:230px">Drag-select: This option allows selecting designs by dragging over points</span>
									    <div onclick="set_selection_option(2);">
									    	Drag-select:
									    	<input id="drag-select" type="radio"/>
								    	</div>
									</div>
								    
									<div class="tooltip">
										<span class="tooltiptext" style="right:230px;padding:11px;width:230px">Deselect: This option allows de-selecting designs by dragging over points</span>
									    <div onclick="set_selection_option(3);">
									    	Deselect:
									    	<input id="de-select" type="radio"/>
								    	</div>
									</div>


			            		</div>
		            		</div>
		
		
		
			                <div id="selection_option_div" style="float:left;width:220px;margin-top: 20px;">
								<div style="margin:auto;width:200;padding:15px;background-color:#D9D9D9">
									<div style="font-size:18px;font-weight: bold;margin-bottom:10px">
										Range Selection
									</div>
				                    Cost range: <br/>
				                    <input id="selectArchsWithinRange_minCost" class="select_within_range_text_box" type="text" value="0"/>&nbsp; ~&nbsp; <input id="selectArchsWithinRange_maxCost" class="select_within_range_text_box" type="text" value="inf"/>
				                    <br/> Science Benefit range: <br/>
				                    <input id="selectArchsWithinRange_minScience" class="select_within_range_text_box" type="text" value="0"/>&nbsp; ~&nbsp; <input id="selectArchsWithinRange_maxScience" class="select_within_range_text_box" type="text" value="1"/>
				                    <br/>
			                    	<button type="button" id="selectArchsWithinRangeButton" style="margin-top:10px;margin-bottom:3px;width:170px" disabled="True">Select within range</button>

								</div>
<!-- 			                    <button type="button"  id="hide_selection" disabled="True">Hide selections</button> -->
<!-- 			                    <button type="button"  id="show_all_archs" disabled="True">Show all architectures</button> -->
            				    <button type="button"  id="cancel_selection" disabled="True" style="width:220px;height:35px;margin-top:20px">Cancel all selections</button>
			                	
			                
			                </div>


		            	</div>
		            	
		
		            </div>
		        </div>
		
		      
		
		        <div id="secondLineOfFigs" style="float:left;margin-top: 5px; width: 100%;">
		        
		        
				    <div id="basicInfoBox_div" style="width: 1212px; margin: 0 auto; float:left;border-style: solid;
				    					border-width: 1px;height: 430px;overflow: scroll;
				    					hbmargin-left: 0px;font-family: 'Helvetica Neue', Helvetica; 
		              					font-weight: 300; padding: 5px;">
				        <ul class="tabs" data-persist="true">
				            <li><a id="tab1" href="#view1">Inspect Design</a></li>
				            <li><a id="tab2" href="#view2">Filter Setting</a></li>
				            <li><a id="tab3" href="#view3">Driving Features</a></li>
				            <li><a id="tab4" href="#view4">Classification Tree</a></li>
				        </ul>
				        <div class="tabcontents">
				            <div id="view1"></div>
				            <div id="view2"></div>
				            <div id="view3"></div>
				            <div id="view4"></div>
				        </div>
				    </div>
		        
		     
		        </div>
			</div>
		</div>

       <script src="js/scatterPlotUI.js" type="text/javascript"></script>
       <script src="js/drivingFeatures.js" type="text/javascript"></script>
       <script src="js/classificationTree.js" type="text/javascript"></script>
       <script src="js/userDefinedFilter.js" type="text/javascript"></script>
       <script src="js/relabel.js" type="text/javascript"></script>


       
       
       <script>
       
       
    
       		var view7_completed = false;
       		var view6_completed = false;
       		var view5_completed = false;
       		var view8_completed = false;
       		var view9_completed = false;
       		var view10_completed = false;
       		var view11_completed = false;
       		var view12_completed = false;
       		var view13_completed = false;
       		var view14_completed = false;
       		var view15_completed = false;
       		var view16_completed = false;
       		var view17_completed = false;
       		var view18_completed = false;
       		var view19_completed = false;
       		var view20_completed = false;
       		var view21_completed = false;
       		var view22_completed = false;
       		var view23_completed = false;
       		var view24_completed = false;
       		var view13_ready = 0;
       		var view18_ready = 0;
       		var view20_ready = 0;
       		var view21_ready = 0;
       		var view22_ready = 0;
       		var view23_ready = 0;
       

            var original_bitString;
            var modified_bitString;
            var selected_bitString;
            var selected_bitString2;
            var color_drivingFeatures = d3.scale.category10();        
            var i_drivingFeatures=0;
            var filter_arch;
            var modified_filterArch;

            var translate_tmp = [0,0];
            var scale_tmp = 0;
            var translate_tmp_local = [0,0];
            var scale_tmp_local = 0;


            // Metadata
            var orbitList = [];
            var instrList = [];
            var relabeledOrbitList = [];
            var relabeledInstrList = [];
            var ninstr, norb;
            
            // Sign-in
   
            var id_token;
            var session_timed_out = false;
            var key_number=-12345678;
            var testType;
            var remainingTime;
            
            // Scatter plot variables
            
           	var architectures; // old: jsonObj_scatterPlot
            var newArchs = [];  newArchs.length = 0;    
            var infoBox_active = false;
            var selection_changed = true;   
            
            
            var margin = {top: 20, right: 20, bottom: 30, left: 60},
            width = 960 - margin.left - margin.right,
                    height = 540 - margin.top - margin.bottom;
            var json_arch;
            var svg,
                    objects;
            var xValue, xScale, xMap, xAxis, xBuffer, yBuffer,
                    yValue, yScale, yMap, yAxis;
               	
            // Driving features variables
            
			var sortedDFs=null;
           	var support_threshold = 0.015;
           	var confidence_threshold = 0.3;
           	var lift_threshold = 1;
            	
           	// Filter option variables
            var filterDropdownOptions = [{value:"not_selected",text:"Preset Filters"},{value:"paretoFront",text:"Pareto front"},
                {value:"present",text:"Present"},{value:"absent",text:"Absent"},{value:"inOrbit",text:"In orbit"},
                {value:"notInOrbit",text:"Not in orbit"},{value:"together",text:"Together"},
                {value:"togetherInOrbit",text:"Together in orbit"},{value:"separate",text:"Separate"},
                {value:"emptyOrbit",text:"Empty orbit"},{value:"numOrbitUsed",text:"Number of orbit used"},
                {value:"subsetOfInstruments",text:"Num of instruments in a subset"},{value:"defineNewFilter",text:"Define new filter"}];
            
            var userDefFilterExpressionHistory = [];
            userDefFilterExpressionHistory.length=0;
            var userDefFilters = [];
            
            // Classification Tree variables
            
            var classificationTree_window;
            var jsonObj_tree=null;
            var jsonObj_tree_nested;
            
            
            // Experiment-related
            
            var buttonClickCount_drivingFeatures = 0;
            var buttonClickCount_classificationTree = 0;
            var buttonClickCount_filterOptions = 0;
            var buttonClickCount_applyFilter = 0;
            var buttonClickCount_addUserDefFilter = 0;
            var numOfArchViewed =0;
            var numOfDrivingFeatureViewed = 0;
            var getDrivingFeatures_numOfArchs = [];
            var getClassificationTree_numOfArchs = [];
            var getDrivingFeatures_thresholds = [];



            


            try {

            function newDataFromResultFile(){
                var filePath = "/results/1.rs";
                
                $.ajax(
                        {
                            url: "resultsGUIServlet",
                            type: "POST",
                            data: {ID: "resultFileURL_newData", filePath:filePath},
                            async: false,
                            success: function (data, textStatus, jqXHR)
                            {

                            	architectures = JSON.parse(data);
                            },
                            complete: function () {
                                reset_drawing_scatterPlot();
//                                 draw_scatterPlot(architectures);
                            },
                            error: function (jqXHR, textStatus, errorThrown)
                            {
                                alert("error");
                            }
                        });
						orbitList = getOrbitList();
						instrList = getInstrumentList();  
						for(var i=0;i<orbitList.length;i++){
							relabeledOrbitList.push(relabel(orbitList[i]));
						}
						for(var i=0;i<instrList.length;i++){
							relabeledInstrList.push(relabel(instrList[i]));
						}
                       	addDataFromResultFile();
            }
            
            function addDataFromResultFile(){
                var filePath = "/results/3.rs";
                
                var selectedArchs = d3.selectAll("[class=dot_clicked]");
                var numOfSelectedArchs = selectedArchs.size();

                $.ajax({
                	url: "resultsGUIServlet",
                	type: "POST",
                	data: {ID: "resultFileURL_addData",filePath:filePath},
                	async: false,
               		success: function (data, textStatus, jqXHR){
                    	var tmp_architectures = JSON.parse(data);
                    	for(var i=0;i<tmp_architectures.length;i++){
                    		architectures.push(tmp_architectures[i]);
                    	}
                    },
                    complete: function () {
                    	reset_drawing_scatterPlot();
                    	draw_scatterPlot(architectures);

                    },
                    error: function (jqXHR, textStatus, errorThrown)
                    {
                    	alert("error");
                    }
                });

            }
            
            


            
            function extractInfoFromBitString(bitString) {
                var jsonObj_arch
                $.ajax({
                    url: "resultsGUIServlet",
                    type: "POST",
                    data: {ID: "extractInfoFromBitString", bitString: bitString},
                    async: false,
                    success: function (data, textStatus, jqXHR)
                    {
                        jsonObj_arch = JSON.parse(data);
                    },
                    error: function (jqXHR, textStatus, errorThrown)
                    {
                        alert("error");
                    }
                });
                return jsonObj_arch;
            }
            
            function booleanArray2String(bitString) {
                var bitString_string = "";
                for (var i = 0; i < bitString.length; i++) {
                    var bool;
                    if (bitString[i] == true) {
                        bool = 1;
                    } else {
                        bool = 0;
                    }
                    bitString_string = bitString_string + bool;
                }
                return bitString_string;
            }
            function string2BooleanArray(bitString_string) {
                var bitString = [];
                bitString.length = 0;
                for (var i = 0; i < bitString_string.length; i++) {
                    if (bitString_string.charAt(i) == "0") {
                        bitString.push(true);
                    } else {
                        bitString.push(false);
                    }
                }
                return bitString;
            }

            function draw_archBasicInfoTable(bitString) {
            	
            	document.getElementById('tab1').click();

                json_arch = extractInfoFromBitString(bitString);
                var norb = json_arch.length;
                var maxNInst = 0;
                var totalNInst = 0;

                for (var i = 0; i < norb; i++) {
                    var nInst = json_arch[i].children.length;
                    totalNInst = totalNInst + nInst;
                    if (nInst > maxNInst) {
                        maxNInst = nInst;
                    }
                }

                d3.select("[id=basicInfoBox_div]").select("[id=view1]")
                        .select("g").select("table").remove();

                var archInfoBox = d3.select("[id=basicInfoBox_div]").select("[id=view1]")
                        .select("g");

                var table = archInfoBox.append("table")
                        .attr("id", "archInfoTable");

                var columns = [];
                columns.push({columnName: "orbit"});
                for (var i = 0; i < maxNInst; i++) {
                    var tmp = i + 1;
                    columns.push({columnName: "Inst " + tmp});
                }

                // create table header
                table.append('thead').append('tr')
                        .selectAll('th')
                        .data(columns).enter()
                        .append('th')
                        .attr("width", function (d) {
                            if (d.columnName == "orbit") {
                                return "120px";
                            } else {
                                return "70px";
                            }
                        })
                        .text(function (d) {
                            return d.columnName;
                        })
                        .style("font-size", "12px");
                

                // create table body
                table.append('tbody')
                        .selectAll('tr')
                        .data(json_arch).enter()
                        .append('tr')
                        .attr("name", function (d) {
                            return d.orbit;
                        })
                        .selectAll('td')
                        .data(function (row, i) {
                            var thisRow = [];
                            var orbitObj = {type: "orbit", content: json_arch[i].orbit};
                            thisRow.push(orbitObj);
                            for (var j = 0; j < json_arch[i].children.length; j++) {
                                var instObj = {type: "instrument", content: json_arch[i].children[j], orbit: json_arch[i].orbit};
                                thisRow.push(instObj);
                            }
                            return thisRow;
                        }).enter()
                        .append('td')
                        .attr("name", function (d) {
                            d.content;
                        })
                        .style("background-color", function (d) {
                            if (d.type == "orbit") {
                                return "#D0D0D0";
                            }
                        })
                        .attr("id", "arch_cell")
                        .attr("width", function (d, i) {
                            if (d.type == "orbit") {
                                return "120px";
                            } else {
                                return "70px";
                            }
                        })
                        .text(function (d) {
                            return relabel(d.content);
                        })
                        .style("font-size", "13px");


            }
                function getOrbitList() {
                    var orbitList
                    $.ajax({
                        url: "resultsGUIServlet",
                        type: "POST",
                        data: {ID: "getOrbitList"},
                        async: false,
                        success: function (data, textStatus, jqXHR)
                        {
                            orbitList = JSON.parse(data);
                        },
                        error: function (jqXHR, textStatus, errorThrown)
                        {
                            alert("error");
                        }
                    });
                    return orbitList;
                }
                function getInstrumentList() {
                    var instrumentList
                    $.ajax({
                        url: "resultsGUIServlet",
                        type: "POST",
                        data: {ID: "getInstrumentList"},
                        async: false,
                        success: function (data, textStatus, jqXHR)
                        {
                            instrumentList = JSON.parse(data);
                        },
                        error: function (jqXHR, textStatus, errorThrown)
                        {
                            alert("error");
                        }
                    });
                    return instrumentList;
                }





                
                function getNinstr() {
                    var output;
                    $.ajax({
                        url: "resultsGUIServlet",
                        type: "POST",
                        data: {ID: "getNinstr"},
                        async: false,
                        success: function (data, textStatus, jqXHR)
                        {
                            output = data;
                        },
                        error: function (jqXHR, textStatus, errorThrown)
                        {
                            alert("error");
                        }
                    });
                    return output;
                }
                function getNorb() {
                    var output;
                    $.ajax({
                        url: "resultsGUIServlet",
                        type: "POST",
                        data: {ID: "getNorb"},
                        async: false,
                        success: function (data, textStatus, jqXHR)
                        {
                            output = data;
                        },
                        error: function (jqXHR, textStatus, errorThrown)
                        {
                            alert("error");
                        }
                    });
                    return output;
                }

            
            function numOfArchs(){
                var leng1 = d3.select("[id=scatterPlotFigure]").select("svg").selectAll("[class=dot]").size();
                var leng2 = d3.select("[id=scatterPlotFigure]").select("svg").selectAll("[class=dot_clicked]").size();
                var leng3 = d3.select("[id=scatterPlotFigure]").select("svg").selectAll("[class=dot_DFhighlighted]").size();
                var leng4 = d3.select("[id=scatterPlotFigure]").select("svg").selectAll("[class=dot_selected_DFhighlighted]").size();
                return leng1+leng2+leng3+leng4;
            }
            function numOfSelectedArchs(){
                var leng1 = d3.select("[id=scatterPlotFigure]").select("svg").selectAll("[class=dot_clicked]").size();
                var leng2 = d3.select("[id=scatterPlotFigure]").select("svg").selectAll("[class=dot_selected_DFhighlighted]").size();
                return leng1+leng2;
            }


        	remainingTime = + 10000000000000000000000;
         	testType = "3";
            newDataFromResultFile();

            
           
            
            
            var current_view=5;
            
            function click_leftarrow(){
            	if(current_view==5){
            		window.location.replace("iFEEDTutorial.html?48375937584=23413");
            	}else{
            		current_view= current_view-1;
            	}
            	display_views();
            }
            function click_rightarrow(){
            	current_view = current_view+1;
            	display_views();
            }

            function clear_view(){
            	d3.select("#main_header").text("");
            	d3.select("#main_text").text('');
            	
            	d3.select("#main_img").attr("src","")
            			.style("width","0%")
            			.style("opacity",0);
            	
            	d3.select("#main_text2").remove();

            	d3.select("#main_img2").attr("src","")
            			.style("width","0%")
            			.style("opacity",0);
            	
            	d3.select("#main_text3").text('');
            	
            	d3.select("#main_img_credit").text("");
            	activate_right_arrow();
            }

            function display_views(){
            	clear_view();
            	d3.select('#tutorial_page_number').text("" + current_view);
            	
            	
            	if(current_view==5){
            		d3.select("#main_header").text("Scatter Plot Panel and Analysis Panel")
            		d3.select("#main_text").html('<p>The scatter plot panel (box highlighted in red) displays thousands of different designs '
            				+' of satellite systems. Each dot corresponds to one design, and is located based on its corresponding '
            				+' cost and science benefit score.</p>'
            				+'<p>You can zoom in and zoom out using your mouse wheel, or using pinching motion if you are using'
            				+' a trackpad. You can also pan the view using your mouse.</p>');

            		d3.select('#scatterPlotFigure')
            			.style('border-width','5px')
            			.style('border-color','#FF2D65');
            		
            		d3.select('#OptionsPane')
	    				.style('border-width','1px')
	    				.style('border-color','#000000');
            		
            	}
            	else if(current_view==6){
            		d3.select('#scatterPlotFigure')
        				.style('border-width','1px')
        				.style('border-color','#000000');
            		
            		d3.select("#main_header").text("Selection Panel")
            		d3.select("#main_text").html('<p>The selection panel contains menus and options you can use to '
            				+'select a group of solutions.</p> <p>Selection is useful for analyzing a group of solutions'
            				+' as will be shown later.</p>');
            		
            		d3.select('#OptionsPane')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		
            		
            		d3.select('#OptionsPane').select('div').select('div')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
        		
            		
            	}	
            	else if(current_view==7){
            		if(!view7_completed){
            			deactivate_right_arrow();
            		}
            		
            		d3.select("#main_header").text("Drag-select Option")
            		d3.select("#main_text").html('<p>Drag-select option allows you to '
            				+'select dots on the scatter plot by dragging your mouse over them.</p> '
            				+'<p> Use drag-select option to select dots to continue.</p>');
            		
            		d3.select('#OptionsPane').select('div').select('div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		d3.select('#OptionsPane')
	    				.style('border-width','1px')
	    				.style('border-color','#000000');
            	}
            	else if(current_view==8){
            		if(!view8_completed){
            			deactivate_right_arrow();
            		}
            		
            		d3.select("#main_header").text("Deselect Option")
            		d3.select("#main_text").html('<p>Deselect option allows you to '
            				+'deselect the highlighted dots on the scatter plot by dragging your mouse over them.</p> '
            				+'<p> To continue, use deselect option to cancel selections.</p>');
            		
            		d3.select('#OptionsPane').select('div').select('div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		d3.select('#selection_option_div').select('div')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		
            	}
            	else if(current_view==9){
            		if(!view9_completed){
            			deactivate_right_arrow();
            		}
            		
            		d3.select("#main_header").text("Selection by Range")
            		d3.select("#main_text").html('<p>You can also set a range of values for cost and benefit to make the selection.</p> '
            				+'<p> To continue, set ranges of values for cost and benefit and click [select within range] button.</p>');
            		
            		
            		d3.select('#selection_option_div').select('div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		d3.select('#OptionsPane').select('div').select('div')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		
            		d3.select('#StatusBar')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		
            	}
            	else if(current_view==10){
            		
            		d3.select("#main_header").text("Number of designs selected")
            		d3.select("#main_text").html('<p>The total number of designs and the number of selected designs are displayed on'
            				+'the boxes above the scatter plot.</p>');
            		
            		d3.select('#StatusBar')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		
            		d3.select('#selection_option_div').select('div')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		d3.select('#cancel_selection')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		
            	}
            	else if(current_view==11){
            		if(!view11_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Cancel All Selection")
            		d3.select("#main_text").html('<p>Cancel all selection button is used to cancel all the selections. </p>'
            				+'<p>To continue, press cancel all selections button.</p>');

            		d3.select('#cancel_selection')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		
            		d3.select('#StatusBar')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		
            		d3.select('#basicInfoBox_div')
	    				.style('border-width','1px')
	    				.style('border-color','#000000');
            	}
            	else if(current_view==12){
            		d3.select("#main_header").text("Analysis Panel")
            		d3.select("#main_text").html('<p>The analysis panel is located below the scatter plot, '
            				+'and you can use it to analyze the data displayed on the scatter plot.</p>');

            		d3.select('#basicInfoBox_div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		d3.select('#cancel_selection')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		
            	}
            	else if(current_view==13){
            		if(!view13_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Design Inspection")
            		d3.select("#main_text").html('<p>If you hover your mouse over each design on the scatter plot, '
            				+' relevant information will be displayed on the design inspection tab.</p>'
            				+'<p>The displayed information conatains the science benefit score and the cost, as well as'
            				+' a figure that shows what instruments are assigned to each orbit.</p>'
            				+'<p>The borderline of either the scatter plot or the analysis panel will be represented by bold lines.'
            				+' The bold line means that the panel is currently focused. When the analysis panel is focused, hovering the mouse'
            				+' over a dot on scatter plot will not change the information already displayed on the analysis panel.'
            				+' To enable the inspection of designs by hovering, click the scatter plot to bring the focus back to the scatter plot.</p>'
            				+'<p>To continue, try alternating the focus by clicking the scatter plot and the analysis panel.</p>');

            		document.getElementById('tab1').click();
            		set_selection_option(1);
            		cancelDotSelections();
            		unhighlight_basic_info_box();
            		
            		d3.select('#basicInfoBox_div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	}
            	else if(current_view==14){
            		d3.select("#main_header").text("Filters")
            		d3.select("#main_text").html('<p>Filters can be used to select a group of designs '
            				+'that share the common feature. For example, you can selectively highlight '
            				+'designs that use instrument C, or designs that assign instrument D and E to the orbit 4000. </p>'
            				+'<p>Such selective highlighting function is useful to see how designs sharing the same '
            				+'feature are distributed in the scatter plot.</p>'
            				+'<p>The most basic and useful features have been identified and built into the filter options. '
            				+'You can select one of these preset filters to specify what patterns you want to investigate.</p>');

            		document.getElementById('tab2').click();
            	    highlight_basic_info_box();
            		
            		d3.select('#basicInfoBox_div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            		
            	    d3.select('#filter_options').select('select')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
        	    	d3.select('#applyFilterButton_new')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            		
            	}
            	else if(current_view==15){
            		if(!view15_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Preset Filters: Pareto front")
            		d3.select("#main_text").html('<p>We will test some of the preset filters. First, the Pareto front is used'
            				+' to highlight a layer of dots that are closest to low-cost high-science-score region.'
            				+' The Pareto ranking represents the number of layers that will be selected.'
            				+' To use this filter, follow the steps below:</p>'
            				+'<p>1. Select Pareto front option from the dropdown menu. </p>'
            				+'<p>2. In the input field that appears, type in an integer number.</p>'
            				+'<p>3. Then click [Apply new filter] button to apply the filter.</p>');
            		
            		d3.select('#basicInfoBox_div')
	    				.style('border-width','1px')
	    				.style('border-color','#000000');
            		
            		document.getElementById('tab2').click();
            	    highlight_basic_info_box();
            	    
            	    d3.select('#filter_options').select('select')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    d3.select('#applyFilterButton_new')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    
            	}
            	else if(current_view==16){
            		if(!view16_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Preset Filters: Present")
            		d3.select("#main_text").html('<p>Filter called Present is used to selectively highlight designs that '
            				+'contain specific instrument. It takes in one instrument name as an argument. All the selected designs'
            				+' will have the given instrument.</p>'
            				+'<p>1. Select Present option from the dropdown menu. </p>'
            				+'<p>2. In the input field that appears, type in an instrument name. '
            				+'The instrument should be an alphabet letter ranging from A to L. </p>'
            				+'<p>3. Then click [Apply new filter] button to apply the filter.</p>');
            		
            		document.getElementById('tab2').click();
            	    highlight_basic_info_box();
            	    
            	    d3.select('#filter_options').select('select')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    d3.select('#applyFilterButton_new')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	}
            	else if(current_view==17){
            		if(!view17_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Preset Filters: InOrbit")
            		d3.select("#main_text").html('<p>Filter called InOrbit is used to selectively highlight designs that '
            				+'assigns a specific instrument to the given orbit. It takes in an orbit name and an instrument '
            				+'name as arguments. To continue, follow the steps below:</p>'
            				+'<p>1. Select InOrbit option from the dropdown menu. </p>'
            				+'<p>2. In the first input field that appears, type in an orbit name. '
            				+'The orbit name should be a number in thousands (1000, 2000, 3000, 4000, or 5000). </p>'
            				+'<p>2. In the second input field, type in an instrument name. '
            				+'The instrument should be an alphabet letter ranging from A to L. </p>'
            				+'<p>3. Then click [Apply new filter] button to apply the filter.</p>');
            		
            		document.getElementById('tab2').click();
            	    highlight_basic_info_box();
            	    
            	    d3.select('#filter_options').select('select')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    d3.select('#applyFilterButton_new')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    
            	    
	        	    d3.select('#applyFilterButton_add')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
	        	    d3.select('#applyFilterButton_within')
						.style('border-width','0px')
						.style('border-color','#000000');
            	    
            	    
            	}
            	
            	
            	else if(current_view==18){
            		if(!view18_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Filter application buttons")
            		d3.select("#main_text").html('<p> There are three different buttons you can use to apply filters.'
            				+' The first one is [Apply new filter], which simply applies the current selected filter regardless'
            				+' of the previous selections made. The other two buttons are used when you have a group of designs'
            				+' already selected in the scatter plot, and want to apply filters in addition to the current selection.</p>'
            				+'<p>[Add to selection] adds the newly filtered designs to the current selection. The highlighted designs'
            				+' on the scatter plot remains highlighted and the filter will be applied to previously unhighlighted designs.' 
            				+' This is similar to the logical connective OR.</p>'
		            		+'<p>[Search within selection] applies the filter to the currently selected set of designs. This is'
		    				+' similar to the logical connective AND.</p>'
		    				+'<p>To continue, try both options using the filters of your choice.</p>');
            		
            		document.getElementById('tab2').click();
            	    highlight_basic_info_box();
            	    
            	    d3.select('#filter_options').select('select')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    d3.select('#applyFilterButton_new')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
            	    
            	    d3.select('#applyFilterButton_add')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    d3.select('#applyFilterButton_within')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	}
            	else if(current_view==19){
            		if(!view19_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Making your own filter")
            		d3.select("#main_text").html('<p>You can also combine filters to define a new filter using [Define new Filter] option'
            				+' from the dropdown menu. The new filter can be defined as a logical combination of preset filters,'
            				+' and therefore you can make more sophisticated filters that better separates good'
            				+' designs from the rest of the designs. To define new filter, follow the steps below:</p>'
            				+'<p>1. Select Define new filter option from the dropdown menu. </p>'
            				+'<p>2. Select any filter from the newly appeared dropdown menu. </p>'
            				+'<p>3. For now, ignore the fields "Filter name" and "Filter expression", and fill in the rest of the input'
            				+' field boxes (arguments such as instrument names and orbit names). </p>'
            				+'<p>4. Click [Add this feature] button on the bottom right.</p>'
            				+'<p>5. Select the another filter from the lower dropdown menu.</p>'
            				+'<p>6. Fill in the input field boxes again. (ignore "Filer name" and "Filter expression")</p>'
            				+'<p>7. Click either [AND] or [OR] button to specify the logical connective you want to use to combine filters</p>'
            				+'<p>8. Click [Add this feature] button on the bottom left.</p>'
            				+'<p>9. Click [Apply new filter] button on the top, to apply the newly generated filter.</p>'
            				+'<p> * If you make a mistake in adding a new filter, you can click [Undo] button to reverse the action.</p>');
            				
            		document.getElementById('tab2').click();
            	    highlight_basic_info_box();
            	    
            	    d3.select('#filter_options').select('select')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');
            	    
	        	    d3.select('#applyFilterButton_add')
	    				.style('border-width','0px')
	    				.style('border-color','#000000');
	        	    d3.select('#applyFilterButton_within')
						.style('border-width','0px')
						.style('border-color','#000000');
            	    d3.select('#saveFilter')
						.style('border-width','0px')
						.style('border-color','#000000');
            	}
            	else if(current_view==20){
            		if(!view20_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Making your own filter - saving filters")
            		d3.select("#main_text").html('<p>You can save the newly defined filter so that you can you can view it later and'
            						+'further analyze it.</p>'
            						+'<p>After defining your own filter, set the filter name by filling in the input field'
            						+' box that appears when you select Define new filter option.</p>'
            						+'<p>Then click the [Save this filter] button on the top right corner.</p>'
            						+'<p>To continue, define your own filter and save it.</p>');
            				
            		document.getElementById('tab2').click();
            	    highlight_basic_info_box();
            	    
            	    d3.select('#filter_options').select('select')
						.style('border-width','0px')
						.style('border-color','#000000');
            	    
            		d3.select('#getDrivingFeaturesButton')
						.style('border-width','0px')
						.style('border-color','#000000');
            	    
            	    d3.select('#saveFilter')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');            	    
            	}
            	else if(current_view==21){
            		if(!view21_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Data Mining - Driving Features")
            		d3.select("#main_text").html('<p>iFEED also provides the data mining capability to help analyzing the data.'
            						+' The data mining extracts the driving features. Driving features are the patterns that '
            						+'appear more often among the selected group of designs compared all other designs. '
            						+'Extracting these patterns can be useful to learn what constitutes good designs. </p>'
            						+'<p>To run data mining, you first have to select a group of designs as targets. '
            						+' The selection can be made using either the drag-selection or the range-selection.</p>'
            						+'<p>Then click the [Run data mining] button on the Driving Features tab.</p>');
            		
            		document.getElementById('tab3').click();
            	    highlight_basic_info_box();
            		set_selection_option(2);
            		cancelDotSelections();
            		
            		d3.select('#getDrivingFeaturesButton')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');  
        	    	d3.select('#saveFilter')
						.style('border-width','0px')
						.style('border-color','#000000'); 
            		d3.select('#basicInfoBox_div')
	    				.style('border-width','1px')
	    				.style('border-color','#000000');
        	    	
            	}
            	else if(current_view==22){
            		if(!view22_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Driving Features Explained")
            		d3.select("#main_text").html('<p>The driving features are presented as bar graphs. Each bar '
            				+'corresponds to one driving feature, and the height of the bar'
            				+' indicates how well the feature separates selected designs from the rest of the designs.'
            				+' As you hover your mouse over each bar, the relevant information is presented in 3 ways.</p>'
            				+'<p>1. Tooltip shows the name of the feature, including the arguments such as instrument names'
            				+' and orbit names. Also, tooltip presents some basic statistics to show the composition of '
            				+'designs with the feature and the selected designs in the dataset.</p>'
            				+'<p>2. Scatterplot highlights (in pink) all the designs that have the given feature. </p>'
            				+'<p>3. A Venn Diagram is presented to show the composition of designs with the feature and the'
            				+' selected designs. The blue circle represents the selected designs, and the pink circle represents'
            				+' designs with the feature.</p>'
            				+'</br><p>To continue, inspect 3 features by hovering your mouse over the bars.</p>');            				
            
	        		document.getElementById('tab3').click();
	        	    highlight_basic_info_box();
	        	    
            		d3.select('#basicInfoBox_div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');  
            	}
            	else if(current_view==23){
            		if(!view23_completed){
            			deactivate_right_arrow();
            		}
            		d3.select("#main_header").text("Data Mining: Classification Tree")
            		d3.select("#main_text").html('<p>The driving features can also be presented using a classification tree. '
            				+'Classification tree is a decision tree that classifies whether a design belongs to the target '
            				+'selected region or not. Each node corresponds to one driving feature. All the designs start'
            				+'from the root node (far left) and follow the branches depending on whether it contains '
            				+'the driving feature specified at each node. If a design contains the driving feature, '
            				+'it will follow the green line. Otherwise, it follow the red line.</p>'
            				+'<p>Each leaf node (far right) can be expanded by clicking on the node. '
            				+'When it is expanded, a new driving feature will replace that node and the tree size will grow. '
            				+'The information displayed at each leaf node indicates whether the designs that reach the node '
            				+'are classified as selected or not selected in the scatter plot. '
            				+'The classification accuracy is displayed inside the parentheses. The weight indicates '
            				+'the number of designs that reached the leaf node.</p>'
            				+'<p>If you hover your mouse over a leaf node (far right), corresponding designs will be'
            				+' highlighted on the scatter plot.</p>'
            				+'<p>To continue, try expanding and collapsing the tree by clicking on the node.</p>');            				
            
	        		document.getElementById('tab4').click();
	        	    highlight_basic_info_box();
	        	    
            		d3.select('#basicInfoBox_div')
	        			.style('border-width','5px')
	        			.style('border-style','solid')
	        			.style('border-color','#FF2D65');  
            	}

            	
            }
            	

            
            
            
            function deactivate_right_arrow(){
            	d3.select("#rightarrow").on("click",null);
            	d3.select('#rightarrow').style('opacity',0.3);
            }
            function activate_right_arrow(){
            	d3.select('#rightarrow').style('opacity',1);
            	d3.select("#rightarrow").on("click",click_rightarrow);
            }
            
            
            
            
            d3.select("#leftarrow").on("click",click_leftarrow);
            d3.select("#rightarrow").on("click",click_rightarrow);
            display_views();
            
            
            
            
            
            
            
            
            
            
            
            

            } catch (err) {
                console.log(err.message);
            }


			
        </script>
    </body>
</html>
